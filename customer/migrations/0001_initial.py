# Generated by Django 5.2.6 on 2025-10-13 04:20

import customer.models
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = []

    operations = [
        migrations.CreateModel(
            name="CustomUser",
            fields=[
                (
                    "is_superuser",
                    models.BooleanField(
                        default=False,
                        help_text="Designates that this user has all permissions without explicitly assigning them.",
                        verbose_name="superuser status",
                    ),
                ),
                (
                    "UserID",
                    models.BigIntegerField(
                        db_column="UserID", primary_key=True, serialize=False
                    ),
                ),
                (
                    "FullName",
                    models.CharField(
                        blank=True, db_column="FullName", max_length=100, null=True
                    ),
                ),
                (
                    "UserName",
                    models.CharField(
                        blank=True,
                        db_column="UserName",
                        max_length=50,
                        null=True,
                        unique=True,
                    ),
                ),
                (
                    "Email",
                    models.CharField(
                        blank=True,
                        db_column="Email",
                        max_length=100,
                        null=True,
                        unique=True,
                    ),
                ),
                (
                    "Role",
                    models.CharField(
                        blank=True,
                        choices=[("CUSTOMER", "Customer"), ("ADMIN", "Admin")],
                        db_column="Role",
                        default="CUSTOMER",
                        max_length=20,
                        null=True,
                    ),
                ),
                (
                    "password",
                    models.CharField(db_column="PasswordHash", max_length=255),
                ),
                ("is_staff", models.BooleanField(default=False)),
                ("is_active", models.BooleanField(default=True)),
            ],
            options={
                "db_table": "User",
                "managed": False,
            },
            managers=[
                ("objects", customer.models.CustomUserManager()),
            ],
        ),
        migrations.CreateModel(
            name="MarketSchedule",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("status", models.CharField(db_column="Status", max_length=10)),
                ("open_hour", models.IntegerField(db_column="OpenHour")),
                ("open_minute", models.IntegerField(db_column="OpenMinute")),
                ("close_hour", models.IntegerField(db_column="CloseHour")),
                ("close_minute", models.IntegerField(db_column="CloseMinute")),
                ("holiday", models.BooleanField(db_column="Holiday", default=False)),
            ],
            options={
                "db_table": "MarketSchedule",
            },
        ),
        migrations.CreateModel(
            name="Stock",
            fields=[
                (
                    "id",
                    models.AutoField(
                        db_column="StockID", primary_key=True, serialize=False
                    ),
                ),
                (
                    "ticker",
                    models.CharField(db_column="Ticker", max_length=10, unique=True),
                ),
                ("name", models.CharField(db_column="CompanyName", max_length=100)),
                (
                    "initial_price",
                    models.DecimalField(
                        db_column="InitialPrice", decimal_places=2, max_digits=10
                    ),
                ),
                (
                    "current_price",
                    models.DecimalField(
                        db_column="CurrentPrice", decimal_places=2, max_digits=10
                    ),
                ),
                (
                    "opening_price",
                    models.DecimalField(
                        db_column="OpeningPrice", decimal_places=2, max_digits=10
                    ),
                ),
                (
                    "day_high",
                    models.DecimalField(
                        db_column="DayHigh", decimal_places=2, max_digits=10
                    ),
                ),
                (
                    "day_low",
                    models.DecimalField(
                        db_column="DayLow", decimal_places=2, max_digits=10
                    ),
                ),
                ("float_shares", models.BigIntegerField(db_column="FloatShares")),
            ],
            options={
                "db_table": "Stock",
            },
        ),
        migrations.CreateModel(
            name="BrokerageAccount",
            fields=[
                (
                    "user",
                    models.OneToOneField(
                        db_column="UserID",
                        on_delete=django.db.models.deletion.CASCADE,
                        primary_key=True,
                        related_name="account",
                        serialize=False,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "cash_balance",
                    models.DecimalField(
                        db_column="Balance",
                        decimal_places=2,
                        default=0.0,
                        max_digits=15,
                    ),
                ),
            ],
            options={
                "db_table": "BrokerageAccount",
            },
        ),
        migrations.CreateModel(
            name="PriceTick",
            fields=[
                (
                    "id",
                    models.AutoField(
                        db_column="TickID", primary_key=True, serialize=False
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(auto_now_add=True, db_column="Timestamp"),
                ),
                (
                    "price",
                    models.DecimalField(
                        db_column="Price", decimal_places=2, max_digits=10
                    ),
                ),
                (
                    "stock",
                    models.ForeignKey(
                        db_column="StockID",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="price_ticks",
                        to="customer.stock",
                    ),
                ),
            ],
            options={
                "db_table": "PriceTick",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="Order",
            fields=[
                (
                    "id",
                    models.AutoField(
                        db_column="OrderID", primary_key=True, serialize=False
                    ),
                ),
                (
                    "action",
                    models.CharField(
                        choices=[("BUY", "Buy"), ("SELL", "Sell")],
                        db_column="Action",
                        max_length=4,
                    ),
                ),
                ("quantity", models.IntegerField(db_column="Quantity")),
                ("status", models.CharField(db_column="Status", max_length=20)),
                (
                    "created_at",
                    models.DateTimeField(auto_now_add=True, db_column="CreatedAt"),
                ),
                (
                    "executed_at",
                    models.DateTimeField(blank=True, db_column="ExecutedAt", null=True),
                ),
                (
                    "stock",
                    models.ForeignKey(
                        db_column="StockID",
                        on_delete=django.db.models.deletion.CASCADE,
                        to="customer.stock",
                    ),
                ),
                (
                    "account",
                    models.ForeignKey(
                        db_column="AccountID",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="orders",
                        to="customer.brokerageaccount",
                    ),
                ),
            ],
            options={
                "db_table": "Order",
            },
        ),
        migrations.CreateModel(
            name="Trade",
            fields=[
                (
                    "id",
                    models.AutoField(
                        db_column="TradeID", primary_key=True, serialize=False
                    ),
                ),
                (
                    "executed_price",
                    models.DecimalField(
                        db_column="ExecutedPrice", decimal_places=2, max_digits=10
                    ),
                ),
                ("executed_qty", models.IntegerField(db_column="ExecutedQty")),
                (
                    "executed_time",
                    models.DateTimeField(auto_now_add=True, db_column="ExecutedTime"),
                ),
                (
                    "order",
                    models.ForeignKey(
                        db_column="OrderID",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="trades",
                        to="customer.order",
                    ),
                ),
            ],
            options={
                "db_table": "Trade",
            },
        ),
        migrations.CreateModel(
            name="Transaction",
            fields=[
                (
                    "id",
                    models.AutoField(
                        db_column="TransactionID", primary_key=True, serialize=False
                    ),
                ),
                (
                    "transaction_type",
                    models.CharField(
                        choices=[("BUY", "Buy"), ("SELL", "Sell")],
                        db_column="TransType",
                        max_length=4,
                    ),
                ),
                (
                    "price_at_transaction",
                    models.DecimalField(
                        db_column="Amount", decimal_places=2, max_digits=10
                    ),
                ),
                ("quantity", models.IntegerField()),
                ("timestamp", models.DateTimeField(auto_now_add=True)),
                (
                    "stock",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT, to="customer.stock"
                    ),
                ),
                (
                    "account",
                    models.ForeignKey(
                        db_column="AccountID",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="transactions",
                        to="customer.brokerageaccount",
                    ),
                ),
            ],
            options={
                "db_table": "Transaction",
            },
        ),
        migrations.CreateModel(
            name="Position",
            fields=[
                (
                    "id",
                    models.AutoField(
                        db_column="PositionID", primary_key=True, serialize=False
                    ),
                ),
                ("quantity", models.IntegerField(db_column="Quantity")),
                (
                    "stock",
                    models.ForeignKey(
                        db_column="StockID",
                        on_delete=django.db.models.deletion.CASCADE,
                        to="customer.stock",
                    ),
                ),
                (
                    "account",
                    models.ForeignKey(
                        db_column="AccountID",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="positions",
                        to="customer.brokerageaccount",
                    ),
                ),
            ],
            options={
                "db_table": "Position",
                "unique_together": {("account", "stock")},
            },
        ),
    ]
